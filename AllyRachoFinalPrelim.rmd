---
title: "NYPD Complaint Data: STAT 184 Final Project Prelim EDA" 
author: "Ally Racho"
output: html_notebook
---

Necessary Libraries:
```{r}
library(mosaic)
library(tidyverse)
```

Since the original dataset has over 1 million cases and is too large of a file, I will be sampling my data to a smaller set of 250000 cases. 
```{r}
SampleData <-
  sample(NYPD_Complaint_Data_Historic, 250000)
```


### Research Question

Based on the NYC borough does there seem to be a trend in a certain type of crime committed there?


### Becoming Acquainted with data:

-  Where did you find them? 
  -- data.cityofnewyork.us
  -- R package

-  Who collected/maintains them? 
  -- The dataset for NYPD_Complaint_Data_Historic is provided by the NYPD and maintained/updated by NYC Open Data.
  -- The data for ZipDemography is provided and maintained by RStudio.

-  When & Why were they originally collected?
  -- The NYPD data was originally collected to engage New Yorkers in information that is produced and collected by the City government. 
  -- The ZipDemography was provided as data tables used as examples in the Data Computing book
    and exercises.

-  What does a case represent in each data source, and how many total cases are available?
  -- A case for NYPD represents a crime that occured on a certain day, time, location. In the original dataset there are 6.5 million cases, but I created a sample subset which contains 250000.
  -- A case for ZipDemography represents data such as race, education, wages based on ZIP code.

-  What are some of the variables that you plan to use
  -- For NYPD dataset, I plan to use the BORO_NM (borough crime occurred in), OFNS_DESC (crime description), CMPLNT_FR_DT (exact time of occurence), and LAW_CAT_CD (level of offense, ie. felony, misdemeanor).
  -- For ZipDemography, I plan to use Highschoolgraduateorhigher, medianfamilyincomedollars, Familiesbelowpovertylevel, ZIP. 

```{r}
names(NYPD_Complaint_Data_Historic)     ## Names of variables
nrow(NYPD_Complaint_Data_Historic)       ## Number of Cases
str(NYPD_Complaint_Data_Historic)       ## Structure of object, information of class
```

```{r}
names(ZipDemography)     ## Names of variables
nrow(ZipDemography)       ## Number of Cases
str(ZipDemography)       ## Structure of object, information of class
```

## Exploring intuition related to the research question

### Create some informative plots and summary statistics 

Level of crime faceted among the boroughs
```{r}
FelonyMisdCrimeBasedonBorough <-
  SampleData %>%
  group_by(BORO_NM,LAW_CAT_CD) %>%
  summarize(total = sum(n()))

FelonyMisdCrimeBasedonBorough %>%
  ggplot(aes(x = LAW_CAT_CD, y = total, fill = LAW_CAT_CD))+
  geom_bar(stat= 'identity', position = 'dodge', width = .9)+
  facet_wrap(~ BORO_NM, ncol=3)

FelonyMisdCrimeBasedonBorough
```

Most popular crime based on borough
```{r}
PopularBoroughCrime <-
  SampleData %>%
  group_by(BORO_NM, OFNS_DESC) %>%
  summarise(total = sum(n())) %>%
  filter(total == max(total))

PopularBoroughCrime %>%
  ggplot(aes(x = BORO_NM, y = total, fill = OFNS_DESC))+
  geom_bar(stat= 'identity', position = 'dodge', width = .9)
```

```{r}

```



### Describe preliminary observations and intuition about the research question
Plot 1:
- You can see from the distribution, the most popular level of crime is misdemeanor, with felony second. Brooklyn appears to have the highest amount of crime, and staten island the lowest.
Plot 2:
- The crime that happens the most often is petit larceny, with the maximum total amount of times approximately ~20000 in Manhattan. Harrassment 2 is the leading crime in staten island with approximately ~2500 occurences. 


### Two Data Sources
- Primary data:  This is the main data source to be used in your investigation and it MUST NOT be loaded directly from an R package. You should have many cases (e.g., at least hundreds--preferably many thousands), many variables including a mixture of both categorical & quantitative variables.  
```{r}
library(readr)
NYC_crime <- read_csv('/home/axr402/STAT184 ACTIVITY/STAT184_FinalProject/')
View(NYC_crime)
```

- Other data sources: No problem for these to come from an R package--for example, the ZipGeography or ZipDemography data (from DataComputing package) might be useful when joined with primary sources as you investigate some phenomenon in the US. 
```{r}
library(DataComputing)
data("ZipDemography")
```


Note: Each data source should be less than 80-100MB--the maximum file size permitted in a GitHub Repo... use sampling to create a reduced version for the purpose of the project if needed as we've done occasionally in exercises and weekly activities.

